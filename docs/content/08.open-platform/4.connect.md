# ProxyCast Connect

ProxyCast Connect 是一套中转商生态合作方案，通过 Deep Link 协议实现一键配置功能。

## 核心价值

| 角色 | 价值 |
|------|------|
| **中转商** | 用户转化率提升、品牌曝光、差异化竞争 |
| **用户** | 一键配置、开箱即用、统一管理多个中转 |
| **ProxyCast** | 用户增长、生态繁荣、市场占有率 |

## 工作原理

### 一键配置流程

1. 用户在中转商后台点击「一键配置 ProxyCast」
2. 浏览器打开 `proxycast://connect?relay=xxx&key=sk-xxx` 链接
3. ProxyCast 自动打开，显示确认弹窗
4. 用户确认后，API Key 自动添加到 ProxyCast
5. 配置完成，可以立即使用

### Deep Link 协议

```
proxycast://connect?relay={relay_id}&key={api_key}&name={key_name}&ref={ref_code}
```

| 参数 | 必填 | 说明 |
|------|------|------|
| `relay` | ✅ | 中转商 ID（需在 ProxyCast 注册） |
| `key` | ✅ | API Key |
| `name` | ❌ | Key 名称（默认使用中转商名称） |
| `ref` | ❌ | 推广码（用于统计） |

### 示例

```
# 基础用法
proxycast://connect?relay=openrouter&key=sk-or-v1-xxxx

# 带名称
proxycast://connect?relay=siliconflow&key=sk-xxxx&name=硅基流动-主账号

# 带推广码
proxycast://connect?relay=myrelay&key=sk-xxxx&ref=promo2024
```

## 中转商注册

ProxyCast 是开源软件，中转商通过 **GitHub PR** 方式注册，无需网站注册。

### 注册仓库

```
https://github.com/aiclientproxy/connect
```

### 注册流程

1. **Fork 仓库** - Fork [aiclientproxy/connect](https://github.com/aiclientproxy/connect)
2. **创建配置文件** - 在 `providers/` 目录下创建 `{your-id}.json`
3. **提交 PR** - 提交 Pull Request 到主仓库
4. **自动化检查** - GitHub Actions 自动验证配置
5. **社区审核** - 维护者审核并合并 PR
6. **自动发布** - 合并后自动构建 registry.json

### 配置文件格式

```json
{
  "id": "myrelay",
  "name": "我的中转站",
  "description": "稳定、便宜、快速的 AI API 中转服务",
  
  "branding": {
    "logo": "https://myrelay.com/logo.png",
    "color": "#6366f1"
  },
  
  "links": {
    "homepage": "https://myrelay.com",
    "register": "https://myrelay.com/register",
    "recharge": "https://myrelay.com/recharge",
    "docs": "https://docs.myrelay.com",
    "status": "https://status.myrelay.com"
  },
  
  "api": {
    "base_url": "https://api.myrelay.com/v1",
    "protocol": "openai",
    "auth_header": "Authorization",
    "auth_prefix": "Bearer "
  },
  
  "contact": {
    "email": "support@myrelay.com",
    "telegram": "@myrelay"
  },
  
  "features": {
    "streaming": true,
    "models_endpoint": true
  },
  
  "webhook": {
    "callback_url": "https://api.myrelay.com/proxycast/callback",
    "secret": "whsec_xxxxxxxxxxxxxxxx"
  }
}
```

### 字段说明

| 字段 | 必填 | 说明 |
|------|------|------|
| `id` | ✅ | 唯一标识，小写字母、数字、连字符 |
| `name` | ✅ | 显示名称 |
| `description` | ✅ | 简短描述，≤100 字 |
| `branding.logo` | ✅ | Logo URL，256x256 PNG |
| `branding.color` | ❌ | 主题色，默认 `#6366f1` |
| `links.homepage` | ✅ | 官网地址 |
| `api.base_url` | ✅ | API 地址（必须 HTTPS） |
| `api.protocol` | ✅ | 协议：`openai` 或 `anthropic` |
| `contact.email` | ✅ | 联系邮箱 |
| `webhook.callback_url` | ❌ | 统计回调地址 |
| `webhook.secret` | ❌ | 回调签名密钥 |

### 审核标准

PR 合并前需满足：

- JSON Schema 验证通过
- 文件名与 `id` 字段一致
- Logo 图片可访问（256x256 PNG）
- API 地址使用 HTTPS
- 官网可访问
- 联系方式有效

## 品牌展示

注册成功后，中转商会在 ProxyCast 内获得品牌展示：

- **扩展市场** - 在中转服务分类中展示
- **已安装页面** - 显示品牌信息、快捷链接
- **API Key 管理** - 统一管理该中转商的所有 Key

## 安全设计

### Deep Link 安全

| 风险 | 防护措施 |
|------|---------|
| 恶意链接 | relay_id 必须在注册表中存在 |
| Key 泄露 | 确认弹窗显示脱敏 Key，用户确认后才添加 |
| 钓鱼攻击 | 显示中转商完整信息，用户可核实 |

### 确认弹窗

所有通过 Deep Link 添加的 Key 必须经过用户确认，显示：
- 中转商名称和 Logo
- 脱敏后的 API Key
- Key 名称（如果有）
- 安全提示

## 下一步

- [Connect 接入指南](/open-platform/connect-integration) - 详细的接入步骤
- [统计回调](/open-platform/connect-webhook) - 配置统计回调追踪推广效果
